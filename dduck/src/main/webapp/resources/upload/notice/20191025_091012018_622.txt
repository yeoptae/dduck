--create user oursystem2 identified by qewret1;
--grant resource, connect to oursystem2;
drop table tb_comment;
drop sequence seq_comment;
drop table tb_class;
drop table seq_class;
--첨부파일 테이블--
drop table tb_upload_mento_category;
drop table tb_upload_mento;
drop table tb_upload_notice;
drop table tb_upload_moim;
drop table tb_upload_report;
drop table tb_upload_lecture_category;
drop table tb_upload_lecture;
drop table tb_upload_inquiry;
drop table tb_upload_qna;

drop table tb_notice;
drop table tb_admin;
drop table tb_app_for_class;
drop table tb_moim_comment;
drop table tb_moim;
drop table tb_bookmark;
drop table tb_review;

drop table tb_qna;
drop table tb_qna_comment;
drop table tb_message;
drop table tb_inquiry;
drop table tb_inquiry_category;
drop table tb_report;
drop table tb_lecture;
drop table tb_mento;
drop table tb_member;
drop table tb_sub_location;
drop table tb_location;
drop table tb_subcategory;
drop table tb_category;

drop sequence seq_qna;
drop sequence SEQ_QNA_COMMENT;
drop sequence seq_message;
drop sequence seq_admin;
drop sequence seq_sublocation;
drop sequence seq_location;
drop sequence seq_upload_inquiry;
drop sequence seq_upload_mento;
drop sequence seq_upload_notice;
drop sequence seq_upload_moim;
drop sequence seq_upload_report;
drop sequence seq_upload_lecture;
drop sequence seq_member;
drop sequence seq_mento;
drop sequence seq_category;
drop sequence seq_subcategory;
drop sequence seq_lecture;
drop sequence seq_notice;
drop sequence seq_inquiry_category;
drop sequence seq_inquiry;
drop sequence seq_appforclass;
drop sequence seq_moim;
drop sequence seq_bookmark;
drop sequence seq_moim_comment;
drop sequence seq_review;
drop sequence seq_report;

--회원 member 테이블------------------------------------------------------------------------------
create table tb_member(
    mNum number primary key,
    mId varchar2(30) not null,
    mPassword varchar2(300) not null,
    mName varchar2(15),
    mGender varchar2(3) check(mGender in ('M','F')),
    mBirth date,
    mEmail varchar2(50),
    mPhone char(11),
    mUse char(3) default 'Y' check(mUse in ('Y','N')),
    mHire_date date default sysdate
);

comment on column tb_member.mNum is '회원번호';
comment on column tb_member.mId is '회원아이디';
comment on column tb_member.mPassword is '회원비밀번호';
comment on column tb_member.mName is '회원이름';
comment on column tb_member.mGender is '성별';
comment on column tb_member.mBirth is '생년월일';
comment on column tb_member.mEmail is '이메일';
comment on column tb_member.mPhone is '연락처';
comment on column tb_member.mUse is '아이디사용여부';
comment on column tb_member.mhire_date is '회원가입날짜';


--멘토 mento 테이블------------------------------------------------------------------------------
create table tb_mento(
    mtnum number primary key,
    mnum number not null unique,
    mthiredate date default sysdate,
    mtnickname varchar2(30),
    mthowconfirm varchar2(30) check(mthowconfirm in('대학교인증','대학원인증','신분증인증')) not null,
    mtacademic varchar2(100),
    mtacademicdept varchar2(100),
    mtgraduation varchar2(30) check(mtgraduation in('재학','졸업')),
    mtbank varchar2(30),
    mtaccountnumber varchar2(60),
    mtaDate date default sysdate not null,  --멘토신청날짜
    mtcheck char(3) default 'N' check(mtcheck in('Y','N')) not null,
    mtreason varchar2(4000)
);

alter table tb_mento add constraint fk_mento_01 foreign key (mnum)
references tb_member(mnum) on delete cascade;

comment on column tb_mento.mtnum is '멘토번호';
comment on column tb_mento.mnum is '회원테이블 참조 회원번호';
comment on column tb_mento.mthiredate is '멘토등록날짜';
comment on column tb_mento.mtnickname is '멘토닉네임';
comment on column tb_mento.mthowconfirm is '신분인증방법';
comment on column tb_mento.mtacademic is '멘토출신학교';
comment on column tb_mento.mtacademicdept is '멘토전공';
comment on column tb_mento.mtgraduation is '졸업여부';
comment on column tb_mento.mtbank is '멘토 입금받을 은행';
comment on column tb_mento.mtaccountnumber is '멘토 입금받을 계좌번호';
comment on column tb_mento.mtaDate is '멘토승인 신청날짜';
comment on column tb_mento.mtcheck is '승인여부';
comment on column tb_mento.mtreason is '승인거절사유';


--카테고리테이블-------------------------------------------------------------

create table tb_category(
    scNum number primary key,
    scName varchar2(20) not null
);
    
comment on column tb_category.scNum is '카테고리 번호';
comment on column tb_category.scName is '카테고리 이름';

--지역 location 테이블---------------------------------------------------------
create table tb_location(
    localNum number primary key,
    local_city varchar2(20) not null
);

comment on column tb_location.localNum is '지역(시/도) 번호';
comment on column tb_location.local_city is '지역(시/도) 이름';

--지역 location sub테이블------------------------------------------------------
create table tb_sub_location(
    subLocalNum number primary key,
    localNum number,
    local_country varchar2(20)
);
comment on column tb_sub_location.subLocalNum is '지역(구) 번호';
comment on column tb_sub_location.localNum is '지역(시/도)테이블 참조 지역 번호';
comment on column tb_sub_location.local_country is '지역(구) 이름';

alter table tb_sub_location
add constraint fk_sub_location_01 foreign key(localNum)
references tb_location(localNum);


--서브카테고리테이블-------------------------------------------------------------
create table tb_subcategory(
    subNum number primary key,
    subname varchar2(20),
    scNum number
);
alter table tb_subcategory add constraint fk_subcategory_01 foreign key (scNum)
references tb_category (scnum) on delete cascade;

comment on column tb_subcategory.subNum is '서브카테고리 번호';
comment on column tb_subcategory.subname is '서브카테고리 이름';
comment on column tb_subcategory.scnum is '카테고리 참조번호';

--강의테이블----------------------------------------------------------------------
create table tb_lecture(
    lecNum number primary key,
    mtNum number,
    subnum number not null,
    subLocalNum number not null, 
    lecName varchar2(100) not null,
    lecType varchar2(20) check(lecType in('1대1','그룹')) not null,
    lecmaxcount number default 1 not null,
    lecPrice number not null,
    lecTime number not null,
    lecCount number not null,
    lecWeek varchar2(30) not null,
    lecMeet varchar2(6) check(lecMeet in('협의','선택')),
    lecTot varchar2(100),
    lecTot2 varchar2(100),
    lecOpenDate date,
    lecOpenDate2 date,
    lecLocalContent varchar2(1000),
    lecMentoContent varchar2(1000),
    lecLectureContent varchar2(4000),
    lecStudentCount number default 0,
    lecADate date default sysdate,
    lecCheck char(3) default 'N' check(lecCheck in('Y','N')) not null,
    lecReason varchar2(4000),
    lecStatus char(3) default 'Y' check(lecStatus in('Y','N'))
    );

select * from tb_lecture;

alter table tb_lecture add constraint fk_lecture_01 foreign key (subnum)
references tb_subcategory (subnum);
alter table tb_lecture add constraint fk_lecture_02 foreign key (subLocalNum)
references tb_sub_location (subLocalNum);
alter table tb_lecture add constraint fk_lecture_03 foreign key (mtNum)
references tb_mento (mtNum);

comment on column tb_lecture.lecNum is '수업번호';
comment on column tb_lecture.mtNum is '멘토테이블 참조멘토번호';
comment on column tb_lecture.subnum is '서브카테고리 참조번호';
comment on column tb_lecture.subLocalNum is '지역테이블 참조 지역번호';
comment on column tb_lecture.lecName is '수업이름';
comment on column tb_lecture.lecType is '수업방식';
comment on column tb_lecture.lecmaxcount is '수업정원';
comment on column tb_lecture.lecPrice is '가격';
comment on column tb_lecture.lecTime is '1회 수업 시간';
comment on column tb_lecture.lecCount is '한달 기준 수업 횟수';
comment on column tb_lecture.lecWeek is '요일';
comment on column tb_lecture.lecMeet is '협의인지 아닌지';
comment on column tb_lecture.lecTot is '수업 시간(몇시부터인지)';
comment on column tb_lecture.lecTot2 is '수업 시간(몇시부터인지)';
comment on column tb_lecture.lecOpenDate is '개설날짜';
comment on column tb_lecture.lecOpenDate2 is '개설날짜';
comment on column tb_lecture.lecLocalContent is '지역 상세 내용';
comment on column tb_lecture.lecMentoContent is '멘토 소개 내용';
comment on column tb_lecture.lecLectureContent is '강의 소개 내용';
comment on column tb_lecture.lecStudentCount is '누적수강인원';
comment on column tb_lecture.lecADate is '강의승인 신청날짜';
comment on column tb_lecture.lecCheck is '승인여부';
comment on column tb_lecture.lecReason is '승인거절사유';
comment on column tb_lecture.lecStatus is '강의사용여부';

--1대1문의 카테고리 테이블-----------------------------------------------------------
create table tb_inquiry_category(
    icNum number primary key,
    icName varchar2(100) not null unique
);

comment on column tb_inquiry_category.icNum is '문의카테고리 번호';
comment on column tb_inquiry_category.icName is '문의카테고리 이름';

--1대1문의 inquiry 테이블-------------------------------------------------------------------
create table tb_inquiry(
    inum number primary key,
    icnum number not null,
    mnum number not null,
    lecnum number,
    ititle varchar2(100) not null,
    icontent varchar2(4000) not null,
    icheck char(3) default 'N' check(icheck in('Y','N')) 
);

alter table tb_inquiry add constraint fk_inquiry_01 foreign key (icnum)
references tb_inquiry_category (icnum) on delete cascade;
alter table tb_inquiry add constraint fk_inquiry_02 foreign key (mnum)
references tb_member(mnum) on delete cascade;
alter table tb_inquiry add constraint fk_inquiry_03 foreign key (lecnum)
references tb_lecture(lecnum) on delete cascade;

comment on column tb_inquiry.inum is '문의 글 번호';
comment on column tb_inquiry.icnum is '문의카테고리테이블참조 문의카테고리번호';
comment on column tb_inquiry.mnum is '회원테이블참조 회원번호';
comment on column tb_inquiry.lecnum is '수업테이블참조 수업번호';
comment on column tb_inquiry.ititle is '문의제목';
comment on column tb_inquiry.icontent is '문의내용';
comment on column tb_inquiry.icheck is '문의처리여부';



--수업신청테이블-------------------------------------------------------------------
  
create table tb_app_for_class(
    sNum number primary key,
    mNum number not null,
    lecNum number,
    sTot varchar2(100),
    sText varchar2(4000),
    sPrice number,
    sPayment char(3) default 'N' check(sPayment in ('Y','N')),
    afcCheck char(3) default 'N' check(afcCheck in('Y','N')) 
);
--alter table tb_app_for_class add(sPrice number);
--alter table tb_app_for_class add(sPayment char(3));

alter table tb_app_for_class
modify (spayment default 'N');
alter table tb_app_for_class
modify (spayment check(sPayment in ('Y','N')));


ALTER TABLE tb_app_for_class
  ADD CONSTRAINT FK_appforclass_01 FOREIGN KEY (mNum)
  REFERENCES tb_member (mNum) on delete cascade;
  
ALTER TABLE tb_app_for_class
  ADD CONSTRAINT FK_appforclass_02 FOREIGN KEY (lecNum)
  REFERENCES tb_lecture (lecNum) on delete set null;

comment on column tb_app_for_class.sNum is '수업신청 번호';
comment on column tb_app_for_class.mNum is '회원 번호';
comment on column tb_app_for_class.lecNum is '수업 번호';
comment on column tb_app_for_class.sTot is '신청한 수업시간';
comment on column tb_app_for_class.sText is '하고 싶은 말';
comment on column tb_app_for_class.sPrice is '결제금액';
comment on column tb_app_for_class.sPayment is '결제여부';
comment on column tb_app_for_class.afcCheck is '수업신청 승인여부';

--모임 moim 테이블-----------------------------------------------------------------------------------
create table tb_moim(
    moim_Num number primary key,
    mNum number not null,
    moim_Title varchar2(30) not null,
    moim_Text varchar2(4000) not null,
    moim_readcount number default 0,
    moim_Date date default sysdate not null
);

alter table tb_moim
add constraint fk_moim_01 foreign key(mNum) references tb_member(mNum) on delete cascade;

comment on column tb_moim.moim_Num is '모임구하기 글번호';
comment on column tb_moim.mnum is '회원테이블참조 회원번호';
comment on column tb_moim.moim_Title is '모임구하기 글제목';
comment on column tb_moim.moim_Text is '모임구하기 글내용';
comment on column tb_moim.moim_readcount is '모임구하기 글조회수';
comment on column tb_moim.moim_Date is '모임구하기 글작성일';

--댓글테이블--------------------------------------------------------------------------------------------
create table tb_moim_comment(
    moim_co_num number primary key,    
    moim_num number not null,
    mnum number,
    moim_comment_level number,
    moim_comment_content varchar2(4000) not null,
    moim_comment_ref number,
    moim_comment_date date default sysdate not null
);

alter table tb_moim_comment
add constraint fk_moim_comment_01 foreign key(moim_num) references tb_moim(moim_num) on delete cascade;
alter table tb_moim_comment
add constraint fk_moim_comment_02 foreign key(moim_comment_ref) references tb_moim_comment(moim_co_num) on delete cascade;

comment on column tb_moim_comment.moim_co_num is '모임구하기 댓글번호';
comment on column tb_moim_comment.moim_num is '모임구하기 글참조 번호';
comment on column tb_moim_comment.mnum is '회원테이블 참조 회원번호';
comment on column tb_moim_comment.moim_comment_level is '모임구하기댓글 레벨';
comment on column tb_moim_comment.moim_comment_content is '모임구하기 댓글내용';
comment on column tb_moim_comment.moim_comment_ref is '모임구하기 답글 댓글참조번호';
comment on column tb_moim_comment.moim_comment_date is '모임구하기 댓글작성날짜';

--즐겨찾기 테이블---------------------------------------------------------------------------------------
create table tb_bookmark(
    bNum number primary key,
    mNum number not null,
    lecNum number not null
);

alter table tb_bookmark
add constraint fk_bookmark_01 foreign key(mNum) references tb_member(mNum) on delete cascade;
alter table tb_bookmark
add constraint fk_bookmark_02 foreign key(lecNum) references tb_lecture(lecNum) on delete cascade;

comment on column tb_bookmark.bNum is '즐겨찾기 번호';
comment on column tb_bookmark.mNum is '회원테이블참조 회원번호';
comment on column tb_bookmark.lecnum is '수업테이블참조 수업번호';

--리뷰테이블------------------------------------------------------------------------------
create table tb_review(
    rNum number primary key,
    lecnum number not null,
    mnum number not null,
    rtitle varchar2(100) not null,
    rtext varchar(4000) not null,
    rdate date default sysdate not null
);
comment on column tb_review.rNum is '리뷰번호';
comment on column tb_review.lecnum is '수업참조번호';
comment on column tb_review.rtitle is '리뷰제목';
comment on column tb_review.rtext is '리뷰내용';
comment on column tb_review.mnum is '리뷰작성자 회원참조번호';
comment on column tb_review.rdate is '리뷰작성날자';

alter table tb_review
add constraint fk_review_01 foreign key(lecnum) references tb_lecture(lecnum);
alter table tb_review
add constraint fk_review_02 foreign key(mnum) references tb_member(mnum);

--신고 report 테이블------------------------------------------------------------------------------
create table tb_report(
    report_num number primary key,
    mreporter_num number,
    mattacker_num number,
    report_Title varchar2(200) not null,
    report_Content varchar2(4000) not null,
    report_Check char(3) default 'N' check(report_Check in('Y','N')) not null,
    report_reason varchar2(1000),
    report_Date date default sysdate not null
);

alter table tb_report
add constraint fk_report_02 foreign key(mattacker_num) references tb_member(mnum);

comment on column tb_report.report_num is '신고번호';
comment on column tb_report.mreporter_num is '회원번호참조 신고자번호(작성자)';
comment on column tb_report.mattacker_num is '회원번호참조 신고당한회원번호';
comment on column tb_report.report_Title is '신고제목';
comment on column tb_report.report_Content is '신고내용';
comment on column tb_report.report_Check is '신고 처리여부';
comment on column tb_report.report_reason is '신고 처리내용';
comment on column tb_report.report_Date is '신고날짜';
commit;

-- qna 테이블--------------------------------------------------------------------
CREATE TABLE TB_QNA(
 QNUM NUMBER primary key,
 QTITLE VARCHAR2(50),
 mnum number,
 QCONTENT VARCHAR2(2000),
 QDATE DATE DEFAULT SYSDATE
);

alter table TB_QNA
add constraint fk_qnd_01 foreign key(mnum) references tb_member(mnum) on delete set null;

COMMENT ON COLUMN TB_QNA.QNUM IS 'QNA번호';
COMMENT ON COLUMN TB_QNA.QTITLE IS 'QNA제목';
COMMENT ON COLUMN TB_QNA.mnum IS '회원테이블 참조 QNA작성자';
COMMENT ON COLUMN TB_QNA.QCONTENT IS 'QNA내용';
COMMENT ON COLUMN TB_QNA.QDATE IS 'QNA작성날자';

CREATE SEQUENCE SEQ_QNA_NUM
START WITH 1
INCREMENT BY 1
NOMINVALUE
NOMAXVALUE
NOCYCLE
NOCACHE;

-- qna 댓글 테이블----------------------------------------------------------
CREATE TABLE TB_QNA_COMMENT(
QCNUM NUMBER,
QCLEVEL NUMBER DEFAULT 1,
mnum number,
QCCONTENT VARCHAR(1000),
QREF NUMBER,
QCREF NUMBER,
QCDATE DATE DEFAULT SYSDATE,
CONSTRAINT PK_QCNUM PRIMARY KEY(QCNUM),
CONSTRAINT PK_QCWRITER FOREIGN KEY(mnum) REFERENCES TB_MEMBER(mnum) ON DELETE SET NULL,
CONSTRAINT FK_QREF FOREIGN KEY(QREF) REFERENCES TB_QNA(QNUM) ON DELETE CASCADE,
CONSTRAINT FK_QCREF FOREIGN KEY(QCREF)REFERENCES TB_QNA_COMMENT(QCNUM) ON DELETE CASCADE
);



COMMENT ON COLUMN TB_QNA_COMMENT.QCNUM IS 'QNA댓글번호';
COMMENT ON COLUMN TB_QNA_COMMENT.QCLEVEL IS 'QNA댓글레밸';
COMMENT ON COLUMN TB_QNA_COMMENT.mnum IS '회원테이블 참조 QNA댓글작성자';
COMMENT ON COLUMN TB_QNA_COMMENT.QCCONTENT IS 'QNA댓글';
COMMENT ON COLUMN TB_QNA_COMMENT.QREF IS '참조원글번호';
COMMENT ON COLUMN TB_QNA_COMMENT.QCREF IS 'QNA댓글참조번호';
COMMENT ON COLUMN TB_QNA_COMMENT.QCDATE IS 'QNA댓글작성일';

CREATE SEQUENCE SEQ_QNA_COMMENT
START WITH 1
INCREMENT BY 1
NOMINVALUE
NOMAXVALUE
NOCYCLE
NOCACHE;

--쪽지 테이블----------------------------------------------------------------------
create table tb_message(
    message_num number primary key,
    from_mnum number,
    to_mnum number,
    message_text varchar2(2000),
    message_sendDate varchar2(30),
    message_readCount number default 0
);

insert into tb_message values(seq_message.nextval, 1, 2, '테스트', to_char(sysdate,'yyyy-mm-dd hh24:mi:ss'), default);
insert into tb_message values(seq_message.nextval, 2, 1, '테스트', sysdate, default);
insert into tb_message values(seq_message.nextval, 3, 2, '테스트', sysdate, default);
commit;
select * from tb_message;
alter table tb_message
add constraint fk_message_01 foreign key(from_mnum) references tb_member(mnum);
alter table tb_message
add constraint fk_message_02 foreign key(to_mnum) references tb_member(mnum);

comment on column tb_message.message_num is '쪽지 번호';
comment on column tb_message.from_mnum is '회원테이블 참조 보내는사람';
comment on column tb_message.to_mnum is '회원테이블 참조 받는사람';
comment on column tb_message.message_text is '쪽지 내용';
comment on column tb_message.message_sendDate is '쪽지 전송 날짜/시간';
comment on column tb_message.message_readCount is '쪽지 읽었는지 안읽었는지';

--관리자테이블-----------------------------------------------------------------------
create table tb_admin(
    adminNum number primary key,
    mnum number
);
alter table tb_admin
add constraint fk_admin_01 foreign key(mnum) references tb_member(mnum);

COMMENT ON COLUMN tb_admin.adminNum IS '관리자 번호';
COMMENT ON COLUMN tb_admin.mnum IS '회원테이블 참조 회원번호';


--공지사항 notice 테이블--------------------------------------------------------------------------
create table tb_notice(
    nNum number primary key,
    adminnum number,
    nName varchar2(50) not null,
    nText varchar2(4000) not null,
    nDate date default sysdate not null
);

comment on column tb_notice.nNum is '공지사항 글 번호';
COMMENT ON COLUMN tb_notice.adminnum IS '관리자 번호';
comment on column tb_notice.nName is '공지사항 글 제목';
comment on column tb_notice.nText is '공지사항 글 내용';
comment on column tb_notice.nDate is '공지사항 작성일자';

ALTER TABLE tb_notice
  ADD CONSTRAINT FK_notice_01 FOREIGN KEY (adminnum)
  REFERENCES tb_admin (adminnum) on delete set null;
--upload_mento 카테고리 테이블------------------------------------------------------------------------
create table tb_upload_mento_category(
    up_mento_category varchar2(50) primary key check(up_mento_category in ('profile', 'confirm', 'license'))
);
comment on column tb_upload_mento_category.up_mento_category is '멘토업로드 카테고리(profile, confirm, license)';

--upload_mento 테이블--------------------------------------------------------------------------------
create table tb_upload_mento(
    up_mentoNum number primary key,
    mtnum number not null,
    up_mento_category varchar2(50),
    up_mento_name_license varchar2(100),
    up_mento_org_name varchar2(1000),
    up_mento_re_name varchar2(1000)
);

comment on column tb_upload_mento.up_mentoNum is '멘토첨부파일 번호';
comment on column tb_upload_mento.mtnum is '멘토테이블 참조 멘토번호';
comment on column tb_upload_mento.up_mento_category is '멘토 첨부파일 카테고리 참조 카테고리이름';
comment on column tb_upload_mento.up_mento_name_license is '멘토 자격증 이름';
comment on column tb_upload_mento.up_mento_org_name is '멘토 첨부파일 원래이름';
comment on column tb_upload_mento.up_mento_re_name is '멘토 첨부파일 변경이름';

alter table tb_upload_mento
add constraint fk_upload_mento_01 foreign key(mtnum)
references tb_mento on delete cascade;

alter table tb_upload_mento
add constraint fk_upload_mento_02 foreign key(up_mento_category)
references tb_upload_mento_category on delete cascade;

--upload_notice 테이블-------------------------------------------------------------------
create table tb_upload_notice(
    up_noticeNum number primary key,
    nNum number not null,
    up_notice_org_filename varchar2(4000),
    up_notice_re_filename varchar2(4000)
);


comment on column tb_upload_notice.up_noticeNum is '공지사항 첨부파일 번호';
comment on column tb_upload_notice.nNum is '공지사항테이블 참조 공지사항번호';
comment on column tb_upload_notice.up_notice_org_filename is '공지사항 첨부파일 원래이름';
comment on column tb_upload_notice.up_notice_re_filename is '공지사항 첨부파일 변경이름';

alter table tb_upload_notice
add constraint fk_upload_notice_01 foreign key(nNum)
references tb_notice on delete cascade;


--upload_moim 테이블----------------------------------------------------------------------
create table tb_upload_moim(
    up_moimNum number primary key,
    moim_Num number not null,
    up_moim_org_filename varchar2(4000),
    up_moim_re_filename varchar2(4000)
);

comment on column tb_upload_moim.up_moimNum is '모임게시판 첨부파일 번호';
comment on column tb_upload_moim.moim_Num is '모임게시판 참조 게시물 번호';
comment on column tb_upload_moim.up_moim_org_filename is '모임게시판 첨부파일 원래이름';
comment on column tb_upload_moim.up_moim_re_filename is '모임게시판 첨부파일 변경이름';

alter table tb_upload_moim
add constraint fk_upload_moim_01 foreign key(moim_Num)
references tb_moim on delete cascade;

--upload_report 테이블--------------------------------------------------------------------
create table tb_upload_report(
    up_reportNum number primary key,
    report_num number not null,
    up_report_org_filename varchar2(4000),
    up_report_re_filename varchar2(4000)
);

comment on column tb_upload_report.up_reportNum is '신고게시판 첨부파일 번호';
comment on column tb_upload_report.report_num is '신고게시판 참조 게시물 번호';
comment on column tb_upload_report.up_report_org_filename is '신고게시판 첨부파일 원래이름';
comment on column tb_upload_report.up_report_re_filename is '신고게시판 첨부파일 변경이름';

alter table tb_upload_report
add constraint fk_upload_report_01 foreign key(report_num)
references tb_report on delete cascade;

--upload_lecture_category 테이블----------------------------------------------------------
create table tb_upload_lecture_category(
    up_lecture_category varchar2(50) primary key    --cover, lecImage
);



--upload_lecture 테이블--------------------------------------------------------------------
create table tb_upload_lecture(
    up_lectureNum number primary key,
    lecnum number not null,
    up_lecture_category varchar2(50),
    up_lecture_org_name varchar2(1000),
    up_lecture_re_name varchar2(1000)
);

comment on column tb_upload_lecture.up_lectureNum is '강의 첨부파일 번호';
comment on column tb_upload_lecture.lecnum is '강의테이블 참조 강의 번호';
comment on column tb_upload_lecture.up_lecture_category is '강의 첨부파일 카테고리 참조 카테고리이름';
comment on column tb_upload_lecture.up_lecture_org_name is '강의 수업첨부파일 원래이름';
comment on column tb_upload_lecture.up_lecture_re_name is '강의 수업첨부파일 변경이름';


alter table tb_upload_lecture
add constraint fk_upload_lecture_01 foreign key(lecnum)
references tb_lecture on delete cascade;

alter table tb_upload_lecture
add constraint fk_upload_lecture_02 foreign key(up_lecture_category)
references tb_upload_lecture_category on delete cascade;


--upload_inquiry 테이블--------------------------------------------------------------------
create table tb_upload_inquiry(
    up_inquiryNum number primary key,
    inum number not null,
    up_inquiry_org_filename varchar2(4000),
    up_inquiry_re_filename varchar2(4000)
);

comment on column tb_upload_inquiry.up_inquiryNum is '1대1문의 첨부파일 번호';
comment on column tb_upload_inquiry.inum is '1대1문의 참조 1대1문의게시물 번호';
comment on column tb_upload_inquiry.up_inquiry_org_filename is '1대1문의 첨부파일 원래이름';
comment on column tb_upload_inquiry.up_inquiry_re_filename is '1대1문의 첨부파일 변경이름';

alter table tb_upload_inquiry
add constraint fk_upload_inquiry_01 foreign key(inum)
references tb_inquiry on delete cascade;

--uoload_qna 테이블-------------------------------------------------------------
CREATE TABLE TB_UPLOAD_QNA(
UP_QNANUM NUMBER primary key,
QNUM NUMBER,
UP_QNA_ORI_FILENAME varchar2(4000),
UP_QNA_RE_FILENAME varchar2(4000)
);

alter table TB_UPLOAD_QNA add constraint fk_upqna_01 foreign key(qnum) references tb_qna(qnum) on delete cascade;

--시퀀스----------------------------------------------------------------------------------

create sequence seq_upload_qna;
create sequence seq_upload_mento;
create sequence seq_upload_notice;
create sequence seq_upload_moim;
create sequence seq_upload_report;
create sequence seq_upload_lecture;
create sequence seq_upload_inquiry;
create sequence seq_member;
create sequence seq_mento;
create sequence seq_category;
create sequence seq_subcategory;
create sequence seq_sublocation;
create sequence seq_location;
create sequence seq_lecture;
create sequence seq_notice;
create sequence seq_inquiry_category;
create sequence seq_inquiry;
create sequence seq_appforclass;
create sequence seq_moim;
create sequence seq_bookmark;
create sequence seq_moim_comment;
create sequence seq_review;
create sequence seq_report;
create sequence seq_admin;
create sequence seq_message;

select * from tb_message;

--계정 락걸려있을때 System계정으로 접속후
--grant create session to semi;
--select username from dba_users;
--select * from dba_users where username='semi';
--alter user semi account unlock;
--alter user semi identified by qewret1;
select * from tb_mento;
commit;


